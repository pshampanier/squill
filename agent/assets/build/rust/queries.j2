{% from "rust/macros" import enum, struct %}
/*********************************************************************
 * THIS CODE IS GENERATED FROM API.YAML BY BUILD.RS, DO NOT MODIFY IT.
 *********************************************************************/
use serde::{Deserialize, Serialize};
use std::collections::HashMap;
use squill_drivers::serde::Decode;
use anyhow::{anyhow, Error};

{{ enum("QueryExecutionStatus") }}

impl QueryExecutionStatus {
    pub fn as_str(&self) -> &'static str {
        match self {
            QueryExecutionStatus::Pending => "pending",
            QueryExecutionStatus::Running => "running",
            QueryExecutionStatus::Completed => "completed",
            QueryExecutionStatus::Failed => "failed",
            QueryExecutionStatus::Cancelled => "cancelled",
            QueryExecutionStatus::Deleted => "deleted",
        }
    }
}

impl TryFrom<&str> for QueryExecutionStatus {
    type Error = Error;

    fn try_from(value: &str) -> Result<Self, Self::Error> {
        match value {
            "pending" => Ok(QueryExecutionStatus::Pending),
            "running" => Ok(QueryExecutionStatus::Running),
            "completed" => Ok(QueryExecutionStatus::Completed),
            "failed" => Ok(QueryExecutionStatus::Failed),
            "cancelled" => Ok(QueryExecutionStatus::Cancelled),
            "deleted" => Ok(QueryExecutionStatus::Deleted),
            _ => Err(anyhow!("Invalid query status: {}", value)),
        }
    }
}

{{ struct("QueryExecutionError") }}
{{ struct("QueryExecution") }}
{{ struct("QueryHistoryPage") }}
{{ struct("FieldStatistics") }}